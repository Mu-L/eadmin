/*!
 eadmin极速后台UI框架（我只想要个后台） | @author:317953536@qq.com 
*/
"use strict";var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Dropdown=function(){function n(e,t){_classCallCheck(this,n),this.dom=e,this.dropdown=null;this.param=$.extend({width:0,trigger:"click",fixed:!1,title:"",data:[]},t),0!=this.param.data.length?this.run():console.log("没有配置下拉菜单数据项，创建失败")}return _createClass(n,[{key:"run",value:function(){this._create(),this._event()}},{key:"_create",value:function(){var e="dropdown-"+createId(),a="";a='<div id="'+e+'" class="dropdown animated faster'+(this.param.fixed?" fixed":"")+'"',0<this.param.width&&(a+=' style="width:'+this.param.width+'px;"'),a+=">",""!=this.param.title&&(a+='<div class="title">'+this.param.title+"</div>"),a+='<ul class="iscroll">',_.each(this.param.data,function(e){var t=e.icon?'<i class="'+e.icon+'"></i>':"",n=e.disabled?' class="disabled"':"",i=!0===e.checked?"":" dn";e.divided?a+='<li class="divided"></li>':a+="<li"+n+">\n\t\t\t\t\t\t"+t+"<span>"+e.name+'</span>\n\t\t\t\t\t\t<i class="ri-check-line checked'+i+'"></i>\n\t\t\t\t\t</li>'}),a+="</ul></div>",body.append(a),this.dropdown=$("#"+e)}},{key:"_event",value:function(){var a=this,n=-1!=["click","contextMenu"].indexOf(this.param.trigger)?"mousedown":"mouseenter",i=null;body.on(n,this.dom,function(e){var t=$(this);if(!("click"==a.param.trigger&&1!=e.which||"contextMenu"==a.param.trigger&&3!=e.which))return t.on("contextmenu",function(e){return!1}),fadeIn(a.dropdown,t),a.dropdown.data("active",1),"mousedown"==n&&a.dropdown.trigger("focus"),"mouseenter"==n&&null!=i&&clearTimeout(i),!(clear=!0)}).on("mouseleave",this.dom,function(){a.dropdown.data("active",0),"mouseenter"==n&&(i=setTimeout(function(){fadeOut(a.dropdown),clear=!1},500))}),"mousedown"==n&&a.dropdown.on("blur",function(){var e=$(this);1!=e.data("active")&&(fadeOut(e),clear=!1)}),"mouseenter"==n&&a.dropdown.on("mouseenter",function(){clearTimeout(i)}).on("mouseleave",function(){i=setTimeout(function(){fadeOut(a.dropdown),clear=!1},500)}),a.dropdown.on("click","li:not(.disabled):not(.divided)",function(){var e=$(this),t=e.index(),n=a.param.data[t];if(null!=n.checked&&(n.checked=!n.checked,n.checked?e.children(".checked").show():e.children(".checked").hide()),_.isFunction(n.click)){var i=n.custom||{};i._index=t,i._checked=null==n.checked?null:n.checked,n.click(i),a.dropdown.hide()}})}}]),n}();