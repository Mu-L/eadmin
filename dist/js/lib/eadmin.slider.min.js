/*!
 eadmin极速后台UI框架（我只想要个后台） | @author:317953536@qq.com 
*/
"use strict";var _createClass=function(){function i(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,a){return e&&i(t.prototype,e),a&&i(t,a),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Slider=function(){function i(t){var e=this,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,i),this.dom=t,this.domCache=scope(this.dom),0!=this.domCache.length?setTimeout(function(){e.width=e.domCache.width(),e.btnWidth=16,e.maxLeft=e.width-e.btnWidth,e.offsetX=e.domCache.offset().left;e.stepWidth=0;e.param=$.extend({value:0,disabled:!1,step:0,min:0,max:100,tips:"",change:null},a),e.run()},50):console.log("没有"+this.dom+"元素，滑块不再创建")}return _createClass(i,[{key:"run",value:function(){this._create(),this.param.disabled||this._event()}},{key:"_create",value:function(){var l=this,t=function(t){t.hasClass("slider")||t.addClass("slider"),l.param.disabled&&t.addClass("slider-disabled");var e="",a=void 0;if(0<l.param.step){l.stepWidth=_.round(l.width/l.param.step);for(var i=1;i<l.param.step;i++)e+='<div class="step" style="left: '+l.stepWidth*i+'px;"></div>';a=l.param.value/l.param.step*l.stepWidth,(a-=8)<0&&(a=0),a>l.maxLeft&&(a=l.maxLeft)}else a=_.floor(l.maxLeft/(l.param.max-l.param.min)*l.param.value);var s=l.param.value;0==s&&(s=l.param.min),""!=l.param.tips&&(s=_.replace(l.param.tips,"[val]",s)),e+='<div class="slider-btn'+(l.param.disabled?" tips-disabled":"")+'" data-tips="'+s+'" data-tips-offset="middle" \n\t\t\t\t\t\tdata-tips-center="1" style="left:'+a+'px;">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="slider-bar" style="width:'+(a+l.btnWidth)+'px;"></div>',t.html(e)};1==this.domCache.length?t(this.domCache):this.domCache.each(function(){t($(this))})}},{key:"_event",value:function(){var n=this,r=0;n.domCache.on("mouseenter",".slider-btn",function(){$(this).data("active",1)}).on("mouseleave",".slider-btn",function(){$(this).data("active",0)}).on("mousedown",".slider-btn",function(t){var a=$(this),i={clientX:null,clientXClone:t.clientX,allow:!0,timer:null,val:0};i.left=parseInt(a.css("left")),i.bar=a.next(".slider-bar"),a.addClass("tips-disabled"),selectEnabled&&userselect(0),$(document).bind("mousemove",function(t){if(i.clientX=t.clientX-i.clientXClone,(r=i.left+i.clientX)<0||r>n.maxLeft){if(!i.allow)return;r=n._checkLeft(r),i.allow=!1}else i.allow=!0;if(0<n.param.step){if(r==n.maxLeft)r=n.maxLeft,i.val=n.param.max;else{var e=n._stepVal(r);i.val=e.val,r=e.left}a.css("left",r),i.bar.width(r+n.btnWidth)}else a.css("left",r),i.bar.width(r+n.btnWidth),i.val=n._val(r),i.val+=n.param.min;clearTimeout(i.timer),n._tips(i.val,a),Tips.reset(a,{offset:"middle"}),i.timer=setTimeout(function(){null!=n.param.change&&_.isFunction(n.param.change)&&n.param.change(i.val)},400)}).bind("mouseup",function(){a.removeClass("tips-disabled"),0==a.data("active")&&Tips.destory(a),$(this).unbind("mousemove").unbind("mouseup")})}).on("mouseup",".slider-btn",function(){selectEnabled&&userselect(1),$(this).parent().data("btn",!0)}).on("click",function(t){var e=$(this),a={val:0};if(1!=e.data("btn")){r=_.floor(t.clientX-n.offsetX),r-=n.btnWidth/2,r=n._checkLeft(r);var i=e.children(".slider-btn"),s=e.children(".slider-bar");if(0==n.param.step)a.val=n._val(r);else if(r!=n.maxLeft){var l=n._stepVal(r);a.val=l.val,r=l.left}else a.val=n.param.max;i.css("left",r),s.width(r+n.btnWidth),n._tips(a.val,i),null!=n.param.change&&_.isFunction(n.param.change)&&n.param.change(a.val)}else e.data("btn",!1)})}},{key:"_tips",value:function(t,e){""!=this.param.tips&&(t=_.replace(this.param.tips,"[val]",t)),e.data("tips",t)}},{key:"_checkLeft",value:function(t){return t<0&&(t=0),t>this.maxLeft&&(t=this.maxLeft),t}},{key:"_val",value:function(t){return _.floor((this.param.max-this.param.min)/this.maxLeft*t)}},{key:"_stepVal",value:function(t){var e=0,a=parseInt((t+this.btnWidth/2)/this.stepWidth);return 0<(e=a*this.stepWidth)&&(e-=this.btnWidth/2),{val:a*this.param.step,left:e}}}]),i}();