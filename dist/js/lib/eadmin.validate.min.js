/*!
 eadmin极速后台UI框架（我只想要个后台） | @author:317953536@qq.com 
*/
"use strict";var _createClass=function(){function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Validate=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"run",value:function(){var r=this;body.on("blur",":text[data-validate], :password[data-validate], textarea[data-validate]",function(){r._check($(this))}).on("click",":checkbox, :radio",function(){var e=[$(this),{}],t=e[0],a=e[1];a.parent=t.closest(".form-group"),a.dom=a.parent.find('[name="'+t.attr("name")+'"]:first'),null!=a.dom.data("validate")&&r._check(a.dom)}).on("change","select[data-validate]",function(){r._check($(this))})}},{key:"submit",value:function(e){var t=e.find("[data-validate]");if(!t.length)return!0;var a=this;t.each(function(){var e=$(this);return!!e.is(":hidden")||(null!=e.data("validate-error")||void a._check(e))})}},{key:"_check",value:function(e){var t=this,a={this:e},r={preg:function(e){var t=[];return t.require="[.\\s\\S]+",t.mobile="1[345789][\\d]{9}",t.phone="([\\d]{3,4}-)?[\\d]{7,8}",t.email="[\\w-\\.]+@[\\w-\\.]+(\\.\\w+)+",t.qq="[1-9][\\d]{4,9}",t.idcard="(^\\d{15}$)|(^\\d{17}(\\d|X|x)$)",t.url='(http://|https://)?[A-Za-z0-9]+\\.[A-Za-z0-9]+([/=?%-&_#@[]+!])*([^<>"])*',t.date="\\d{4}[/-]+\\d{2}[/-]+\\d{2}",t.money="\\d{1,}\\.\\d{2,4}",t.ip="\\d{1,}\\.\\d{1,}\\.\\d{1,}\\.\\d{1,}",t.number="[0-9]+",t.letter="[a-zA-Z]+",t.numberLetter="[0-9a-zA-Z]+",t.zipcode="[1-9][0-9]{5}",null!=t[e]&&t[e]},check:function(e,t){var a=r.preg(e);return!1===a&&(a=e),!!new RegExp(a).test(t)},set:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];a.this.is("textarea")?Form.textarea(a.this,e):Form.input(a.this,e)},success:function(){null!=a.this.data("validate-error")&&(a.note=t._note(a.this),0==a.this.data("note")?a.note.remove():a.note.removeClass("error").html(a.this.data("note")),a.this.removeData("validate-error"))},error:function(e){a.note=t._note(a.this),a.this.data("validate-error",1),null!=a.msg&&a.note.addClass("error").html(e)}};return a.rule=a.this.data("validate"),a.msg=a.this.data("validate-msg"),a.this.is("select")?0==a.this.find(":selected").index()?void r.error(a.msg):void r.success():a.this.is(":checkbox")||a.this.is(":radio")?(a.parent=a.this.closest(".form-group"),0==a.parent.find('[name="'+a.this.attr("name")+'"]:checked').length?void r.error(a.msg):void r.success()):(a.val=a.this.val(),a.arr={},a.arr.rule=a.rule.split("|"),null!=a.msg&&(a.arr.msg=a.msg.split("|")),a.result=!0,a.key=0,_.each(a.arr.rule,function(e,t){if(-1!=e.indexOf("len")){if(e=e.replace("len=",""),a.arr.len=e.split("-"),""!=a.arr.len[0]&&a.val.length<a.arr.len[0]||""!=a.arr.len[1]&&a.val.length>a.arr.len[1])return a.result=!1,a.key=t,!1}else if(-1!=e.indexOf("val")){if(e=e.replace("val=",""),a.val=parseInt(a.val),a.arr.val=e.split("-"),_.isNaN(a.val)||""!=a.arr.val[0]&&a.val<a.arr.val[0]||""!=a.arr.val[1]&&a.val>a.arr.val[1])return a.result=!1,a.key=t,!1}else if(!r.check(e,a.val))return a.result=!1,a.key=t,!1}),a.result?(r.set(!0),void r.success()):(r.set(),void r.error(a.arr.msg[a.key])))}},{key:"_note",value:function(e){var t=e.closest(".form-group"),a=t.find(".note");return a.length?null==e.data("note")&&e.data("note",a.html()):(t.append('<span class="note"></span>'),a=t.find(".note"),null==e.data("note")&&e.data("note",!1)),a}}]),e}();