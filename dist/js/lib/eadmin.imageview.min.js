/*!
 eadmin极速后台UI框架（我只想要个后台） | @author:317953536@qq.com 
*/
"use strict";var _createClass=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Imageview=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"run",value:function(){var t=[1],r=t[0],s=t[1],a=t[2],l=function(t,e){t.css("transform","translate("+e.left+"px, "+e.top+"px) scale("+r+")")};body.on("click",".imageview",function(){r=1;var n,i,t=[$(this),{}],e=t[0],a=t[1];a.src=e.data("src"),0==body.find("#imageview").length?(body.append('<div id="imageview">\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t<li></li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t<div class="imageview-close">\n\t\t\t\t\t\t\t\t\t<i class="ri-close-line"></i>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="imageview-tips"></div>\n\t\t\t\t\t\t\t</div>'),s=$("#imageview")):s.show(),a.Image=new Image,a.Image.src=a.src,n=1,i=setInterval(function(){if(0<a.Image.width||0<a.Image.height){clearInterval(i);var t=a.Image.width>=a.Image.height?"imgW":"imgH",e='<img \n\t\t\t\t\t\t\t\t\t\tondragstart="return false;" \n\t\t\t\t\t\t\t\t\t\tsrc="'+a.src+'" \n\t\t\t\t\t\t\t\t\t\tclass="'+t+'" \n\t\t\t\t\t\t\t\t\t\tstyle="transform:translate(0px, 0px) scale(1)">';s.find("li").html(e)}else 50<++n&&(clearInterval(i),Eadmin.popup.error({content:"大图加载失败"}))},40)}).on("click",".imageview-close",function(){s.find("li").empty(),s.hide()}).on("mousedown","#imageview img",function(t){var e=[$(this),{}],i=e[0],a=e[1];a.offset=i.offset(),a.x=t.clientX,a.y=t.clientY,a.transform=i.css("transform").replace(/[^0-9\-,]/g,"").split(","),a.t=parseInt(a.transform[5]),a.l=parseInt(a.transform[4]),$(document).on("mousemove",function(t){var e=a.t+(t.clientY-a.y),n=a.l+(t.clientX-a.x);l(i,{top:e,left:n})})}).on("mouseup","#imageview img",function(){$(document).off("mousemove")}).on("mousewheel DOMMouseScroll","#imageview img",function(t){clearTimeout(a);var e=[$(this),{e:t.originalEvent,tips:s.find(".imageview-tips")}],n=e[0],i=e[1];i.delta=i.e.detail&&(0<i.e.detail?-1:1)||i.e.wheelDelta&&(0<i.e.wheelDelta?-1:1),(r+=-1==i.delta?.1:-.1)<1&&(r=1),3<r&&(r=3),i.transform=n.css("transform").replace(/[^0-9\-,]/g,"").split(","),l(n,{top:i.transform[5],left:i.transform[4]}),i.tips.html((100*r).toFixed(0)+"%").show(),a=setTimeout(function(){i.tips.hide()},1e3)})}}]),t}();