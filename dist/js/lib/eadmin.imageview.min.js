/*!
 eadmin极速后台UI框架（我只想要个后台） | @author:317953536@qq.com 
*/
"use strict";var _createClass=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Imageview=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"run",value:function(){function a(t,e){t.css("transform","translate("+e.left+"px, "+e.top+"px) scale("+r+")")}var t=[1],r=t[0],s=t[1],i=t[2];body.on("click",".imageview",function(){r=1;var e,n,t=[$(this),{}],i=t[1];i.src=t[0].data("src"),0==body.find("#imageview").length?(body.append('<div id="imageview">\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t<li></li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t<div class="imageview-close">\n\t\t\t\t\t\t\t\t\t<i class="ri-close-line"></i>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="imageview-tips"></div>\n\t\t\t\t\t\t\t</div>'),s=$("#imageview")):s.show(),i.Image=new Image,i.Image.src=i.src,e=1,n=setInterval(function(){var t;0<i.Image.width||0<i.Image.height?(clearInterval(n),t=i.Image.width>=i.Image.height?"imgW":"imgH",t='<img \n\t\t\t\t\t\t\t\t\t\tondragstart="return false;" \n\t\t\t\t\t\t\t\t\t\tsrc="'+i.src+'" \n\t\t\t\t\t\t\t\t\t\tclass="'+t+'" \n\t\t\t\t\t\t\t\t\t\tstyle="transform:translate(0px, 0px) scale(1)">',s.find("li").html(t)):50<++e&&(clearInterval(n),Eadmin.popup.error({content:"大图加载失败"}))},40)}).on("click",".imageview-close",function(){s.find("li").empty(),s.hide()}).on("mousedown","#imageview img",function(t){var e=[$(this),{}],n=e[0],i=e[1];i.offset=n.offset(),i.x=t.clientX,i.y=t.clientY,i.transform=n.css("transform").replace(/[^0-9\-,]/g,"").split(","),i.t=parseInt(i.transform[5]),i.l=parseInt(i.transform[4]),$(document).on("mousemove",function(t){var e=i.t+(t.clientY-i.y),t=i.l+(t.clientX-i.x);a(n,{top:e,left:t})})}).on("mouseup","#imageview img",function(){$(document).off("mousemove")}).on("mousewheel DOMMouseScroll","#imageview img",function(t){clearTimeout(i);var e=[$(this),{e:t.originalEvent,tips:s.find(".imageview-tips")}],t=e[0],n=e[1];n.delta=n.e.detail&&(0<n.e.detail?-1:1)||n.e.wheelDelta&&(0<n.e.wheelDelta?-1:1),3<(r=(r+=-1==n.delta?.1:-.1)<1?1:r)&&(r=3),n.transform=t.css("transform").replace(/[^0-9\-,]/g,"").split(","),a(t,{top:n.transform[5],left:n.transform[4]}),n.tips.html((100*r).toFixed(0)+"%").show(),i=setTimeout(function(){n.tips.hide()},1e3)})}}]),t}();