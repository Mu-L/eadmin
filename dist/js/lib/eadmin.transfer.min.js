/*!
 eadmin极速后台UI框架（我只想要个后台） | @author:317953536@qq.com 
*/
"use strict";var _createClass=function(){function n(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,a){return e&&n(t.prototype,e),a&&n(t,a),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Transfer=function(){function a(t,e){if(_classCallCheck(this,a),this.dom=t,this.domCache=scope(this.dom),0!=this.domCache.length)if(null!=e&&null!=e.data){_.isString(e.data)&&(_.startsWith(e.data,"http")||(e.data=module.conf.http.baseURL+e.data),$.ajax({url:e.data,type:"get",async:!1,dataType:"json",success:function(t){e.data=t}})),0!=e.data.length?(this.param=$.extend({data:{},search:!1,width:0,height:0,bind:"transfer"},e),this.domCache.addClass("transfer-box"),this.run()):console.log("穿梭框"+this.dom+"数据源为空，创建失败")}else console.log("穿梭框"+this.dom+"没有指定数据源：data，创建失败");else console.log("没有找到"+this.dom+"穿梭框容器，创建失败")}return _createClass(a,[{key:"run",value:function(){this._create(),this._event()}},{key:"_create",value:function(){var t={from:[],to:[],height:226,style:' style="',search:"",html:""};for(var e in this.param.data){var a=this.param.data[e];null!=a.checked&&a.checked?t.to.push(a):t.from.push(a)}for(var n in 0<this.param.width&&(t.style+="width:"+this.param.width+"px;"),0<this.param.height&&(t.style+="height:"+this.param.height+"px;",t.height=this.param.height-40),t.style+='"',this.param.search&&(t.search=" transfer-body-search",t.height-=32),t.html='<div class="transfer-box-list"'+t.style+'>\n\t\t\t\t\t<div class="transfer-header">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input type="checkbox" data-num="0"> 源列表\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<span class="count">\n\t\t\t\t\t\t\t<em>0</em> / <em>'+t.from.length+'</em>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="iscroll transfer-body'+t.search+'" style="height:'+t.height+'px;"><ul>',t.from){var h=1==t.from[n].disabled?' class="disabled"':"";t.html+="<li"+h+'>\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t<input data-num="0" value="'+t.from[n].val+'" type="checkbox" '+h+"> "+t.from[n].txt+"\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</li>"}for(var i in t.html+="</ul></div>",this.param.search&&(t.html+='<div class="transfer-search">\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t<input data-num="0" class="search-input" type="text" placeholder="请输入搜索内容" data-icon="ri-search-line|right">\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>'),t.html+='</div><div class="transfer-button">\n\t\t\t\t\t\t<button disabled class="highlight" data-num="0">\n\t\t\t\t\t\t\t<i class="ri-arrow-left-s-line"></i>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button disabled class="highlight" data-num="1">\n\t\t\t\t\t\t\t<i class="ri-arrow-right-s-line"></i>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>',t.html+='<div class="transfer-box-list"'+t.style+'>\n\t\t\t\t\t<div class="transfer-header">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input type="checkbox" data-num="1"> 目标列表\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<span class="count"><em>0</em> / <em>'+t.to.length+'</em></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="iscroll transfer-body'+t.search+'" style="height:'+t.height+'px;"><ul>',t.to){var c=1==t.to[i].disabled?"disabled":"";t.html+='<li class="'+c+'">\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t<input data-num="1" value="'+t.to[i].val+'" type="checkbox" '+c+"> "+t.to[i].txt+"\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</li>"}t.html+="</ul></div>",this.param.search&&(t.html+='<div class="transfer-search">\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t<input data-num="1" class="search-input" type="text" placeholder="请输入搜索内容" data-icon="ri-search-line|right">\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>'),t.html+='</div><input type="hidden" name="'+this.param.bind+'">',this.domCache.html(t.html)}},{key:"_event",value:function(){var t=[".transfer-header :checkbox",".transfer-body :checkbox",".transfer-button button"],a=this,e=[this.domCache.find(".transfer-body"),this.domCache.find(".transfer-header"),this.domCache.find(".transfer-button")],n=e[0],h=e[1],i=e[2];this.domCache.on("click",t[0],function(){var t=$(this),e={eq:+t.data("num")};e.neq=1==e.eq?0:1,e.checkbox=n.eq(e.eq).find(":checkbox").not(":disabled"),t.is(":checked")?(Form.checkbox(e.checkbox,1),h.eq(e.eq).find("em:first").html(e.checkbox.length),i.children("button").eq(e.neq).prop("disabled",!1)):(Form.checkbox(e.checkbox,0),h.eq(e.eq).find("em:first").html(0),i.children("button").eq(e.neq).prop("disabled",!0))}).on("click",t[1],function(){var t={eq:+$(this).data("num")};t.neq=1==t.eq?0:1,t.all=n.eq(t.eq).find(":checkbox").length,t.checked=n.eq(t.eq).find(":checked").length,t.checkall=h.eq(t.eq).find(":checkbox"),h.eq(t.eq).find("em:first").html(t.checked),Form.checkbox(t.checkall,t.checked==t.all?1:0),t.disabled=!(0<t.checked),i.children("button").eq(t.neq).prop("disabled",t.disabled)}).on("click",t[2],function(){var t=$(this),e={eq:+t.data("num")};e.neq=1==e.eq?0:1,t.prop("disabled",!0),e.checked=n.eq(e.neq).find(":checkbox:checked").parent().parent(),e.clone=e.checked.clone(),e.checkbox=e.clone.find(":checkbox"),e.checkbox.data("num",e.eq),Form.checkbox(e.checkbox,0),n.eq(e.eq).children("ul").prepend(e.clone),e.checked.remove(),h.eq(e.neq).find("em:first").html(0),h.eq(e.neq).find("em:last").html(n.eq(e.neq).find(":checkbox").length),h.eq(e.eq).find("em:last").html(n.eq(e.eq).find(":checkbox").length),e.checkbox=h.eq(e.neq).find(":checkbox"),Form.checkbox(e.checkbox,0),e.val=[],n.eq(1).find(":checkbox").each(function(){e.val.push($(this).val())}),a.domCache.children("input[type='hidden']").val(_.join(e.val,",")),a.param.search&&(a.domCache.find(".search-input").eq(e.neq).val(""),n.eq(e.neq).find("li").show())}),a.param.search&&keyup(a.domCache.find(".search-input"),function(t){var e={eq:+t.data("num"),val:t.val(),body:a.domCache.find(".transfer-body")};""!=e.val?e.body.eq(e.eq).find("li").each(function(){var t=$(this);-1!=t.text().indexOf(e.val)?t.show():t.hide()}):e.body.eq(e.eq).find("li").show()})}}]),a}();